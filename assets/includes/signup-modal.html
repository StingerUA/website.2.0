<!-- Signup modal include: white card, black text, close X -->
<div id="signup-modal-overlay" class="signup-modal-overlay" aria-hidden="true" style="display:none;">
  <div class="signup-modal-card" role="dialog" aria-modal="true" aria-labelledby="signup-modal-title">
    <button class="signup-modal-close" aria-label="Close">✕</button>
    <h2 id="signup-modal-title">Registration</h2>
    <form id="signup-modal-form" action="#" class="signup-form">
      <label>Username
        <input type="text" name="username" required placeholder="Enter username">
      </label>
      <label>Password
        <input type="password" name="password" required placeholder="••••••••">
      </label>
      <button type="submit" class="signup-submit">Confirm</button>
    </form>
    <div class="signup-or">— or —</div>
    <button class="signup-google">
      <img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google" class="gicon"> Sign in with Google
    </button>
  </div>
</div>

<style>
  /* Overlay */
  .signup-modal-overlay { position: fixed; inset: 0; background: rgba(2,6,23,0.6); display:flex; align-items:center; justify-content:center; z-index:999999; }
  .signup-modal-card { width:100%; max-width:520px; background:#fff; color:#000; padding:28px; border-radius:18px; box-shadow:0 20px 60px rgba(2,6,23,0.5); position:relative; font-family: Inter, system-ui, -apple-system, sans-serif; }
  .signup-modal-close { position:absolute; right:12px; top:10px; background:transparent; border:none; font-size:20px; cursor:pointer; color:#333; }
  .signup-modal-card h2 { margin:0 0 18px 0; font-size:28px; text-align:center; }
  .signup-form { display:flex; flex-direction:column; gap:12px; }
  .signup-form label { display:flex; flex-direction:column; font-size:14px; color:#111; }
  .signup-form input { margin-top:8px; padding:12px 14px; border:1px solid #e6e6e6; border-radius:10px; background:#fff; color:#000; font-size:15px; }
  .signup-submit { margin-top:8px; background:#00c2ff; border:none; color:#000; padding:12px 16px; border-radius:10px; font-weight:600; cursor:pointer; }
  .signup-google { margin-top:12px; background:#fff; border:1px solid #e6e6e6; padding:10px 14px; border-radius:10px; display:flex; align-items:center; gap:10px; cursor:pointer; }
  .signup-google .gicon { width:20px; height:20px; }
  .signup-or { text-align:center; color:#888; margin-top:12px; }
  @media (max-width:600px) { .signup-modal-card { margin:24px; border-radius:12px; } }
</style>

<script>
  (function(){
    function $(sel, root=document){ return root.querySelector(sel); }
    const overlay = $('#signup-modal-overlay');
    const openButtons = () => Array.from(document.querySelectorAll('.open-signup'));
    function openModal() {
      overlay.style.display = 'flex';
      overlay.setAttribute('aria-hidden','false');
      document.body.style.overflow = 'hidden';
    }
    function closeModal() {
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden','true');
      document.body.style.overflow = '';
      try { if (['/signup.html','/eng/signup.html','/rus/signup.html'].includes(location.pathname)) history.replaceState({}, '', '/'); } catch(e){}
    }

    // Delegate click to open buttons (may be injected later)
    document.addEventListener('click', function(e){
      const t = e.target.closest && e.target.closest('.open-signup');
      if (t) { e.preventDefault(); openModal(); }
      if (e.target.closest && e.target.closest('#signup-modal-overlay') && e.target.id === 'signup-modal-overlay') {
        closeModal();
      }
    });

    // Close button
    document.addEventListener('click', function(e){
      if (e.target.closest && e.target.closest('.signup-modal-close')) closeModal();
    });

    // Escape key
    document.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeModal(); });

    // Auto-open when loaded directly via signup pages
    document.addEventListener('DOMContentLoaded', function(){
      const path = (location.pathname || '/').replace(/\/+$/, '');
      if (['/signup.html','/eng/signup.html','/rus/signup.html'].includes(path)) {
        openModal();
      }
    });

    // Prevent form submission (demo)
    const form = $('#signup-modal-form');
    if (form) form.addEventListener('submit', function(e){ e.preventDefault(); alert('Form submitted (demo)'); closeModal(); });
  })();
</script>
